{"version":3,"sources":["staticFiles.js","logo.svg","bios/seabios.bin","bios/vgabios.bin","Styles.js","Page.js","Columns.js","Button.js","Nav.js","Textarea.js","serviceWorker.js","utils.js","emulator.js","App.js","index.js"],"names":["module","exports","v86state.bin","windows98.img","__webpack_require__","p","unitString","unit","value","str","String","concat","em","px","Styles","Create","rules","styles","k","prefix","vars","colors","black","white","orange","grey0","grey1","grey2","blue","pageWidth","spacing","xs","small","regular","medium","large","xl","fontSize","xxl","lineHeights","typography","Typography","Object","objectSpread","theme","baseFontSize","baseLineHeight","blockMarginBottom","scaleRatio","container","backgroundColor","maxWidth","margin","padding","Page","_ref","children","react_default","a","createElement","Fragment","dist","style","containerBaseStyle","display","columnBaseStyle","textAlign","raw","equalStyle","flex","firstStyle","paddingLeft","lastStyle","paddingRight","singleStyle","Column","first","last","equalWidth","centered","colStyle","defaultProps","Columns","_ref2","alignColumns","columns","React","Children","toArray","filter","child","childCount","length","alignItems","map","column","index","cloneElement","button","border","cursor","color","menuContainer","marginTop","Button","props","actualStyle","assign","ButtonMenu","buttons","marginLeft","img","height","width","Nav","items","this","root","Columns_Columns","Columns_Column","src","logo","alt","Button_ButtonMenu","itemProps","i","src_Button","key","Component","font","disabled","Textarea","react_autosize_textarea_lib_default","isLocalhost","Boolean","window","location","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","response","contentType","headers","get","status","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","getURLAsBuffer","url","onProgress","arguments","undefined","Promise","resolve","reject","xhr","XMLHttpRequest","open","responseType","send","timeout","ms","setTimeout","SHOW_SCREEN","chooseRandom","array","Math","floor","random","getUserName","randomName","name","localStorage","prompt","getUserVoice","noPrompt","randomVoice","voice","MB","win98URL","staticFiles","v86StateURL","LOCAL_ASSETS","createEmulator","opts","onSerialOutput","onXHRProgress","promises","push","all","values","v86State","win98","hda","buffer","async","size","emulator","V86Starter","screen_container","document","getElementById","bios","seabios","vga_bios","vgabios","autostart","memory_size","vga_memory_size","disable_mouse","disable_keyboard","add_listener","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","restore_state","stop","char","socket","io","transports","WELCOME_MESSAGE","getWelcomeMessage","screen","whiteSpace","lineHeight","chatHistory","chatHistoryItem","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","whatToSay","busy","busyText","serialOutput","broadcast","bind","assertThisInitialized","utterance","onResetName","onResetVoice","onChangeWhatToSay","onMaybeSubmitWhatToSay","onUpdateChatHistory","setState","_this$state","emit","JSON","stringify","self","sayText","serial0_send","_this2","e","lengthComputable","percentComplete","loaded","total","parseInt","on","msg","_JSON$parse","parse","target","_this$state2","src_Page","src_Nav","onClick","src_Textarea","onChange","onKeyPress","id","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.67dd0ffc.chunk.js","sourcesContent":["// This is autogenerated, please modify predeploy.js to change this\nmodule.exports = {\n  \"v86state.bin\":\n    \"https://storage.googleapis.com/hypertalk-static/v86state.bin\",\n  \"windows98.img\":\n    \"https://storage.googleapis.com/hypertalk-static/windows98.img\"\n}\n","module.exports = __webpack_public_path__ + \"static/media/logo.186ee9ec.svg\";","module.exports = __webpack_public_path__ + \"static/media/seabios.b72845a6.bin\";","module.exports = __webpack_public_path__ + \"static/media/vgabios.1747aff3.bin\";","import { prefix } from \"inline-style-prefixer\"\n\nexport const Create = function(rules) {\n  const styles = {}\n  for (var k in rules) {\n    styles[k] = prefix(rules[k])\n  }\n  return styles\n}\n\nexport const colors = {\n  black: \"#1c1d20\",\n  white: \"#ffffff\",\n  orange: \"#ffea8d\",\n  grey0: \"#e1e6e9\",\n  grey1: \"#a5abb4\",\n  grey2: \"#3e4043\",\n  blue: \"#4a9cdd\"\n}\n\nconst unitString = function(unit) {\n  return function(value) {\n    const str = new String(`${value}${unit}`) // eslint-disable-line\n    str[\"raw\"] = value\n    return str\n  }\n}\n\nexport const em = unitString(\"em\")\nexport const px = unitString(\"px\")\n\nexport const pageWidth = px(1080)\n\nexport const spacing = {\n  xs: px(4),\n  small: px(8),\n  regular: px(16),\n  medium: px(24),\n  large: px(38),\n  xl: px(56)\n}\n\nexport const fontSize = {\n  small: px(12),\n  regular: px(15),\n  medium: px(18),\n  large: px(22),\n  xl: px(28),\n  xxl: px(36)\n}\n\nexport const lineHeights = {\n  regular: em(1.5),\n  small: em(1.25)\n}\n\nexport default {\n  Create,\n  vars: {\n    colors,\n    pageWidth,\n    spacing,\n    fontSize,\n    lineHeights\n  }\n}\n","import React from \"react\"\nimport { TypographyStyle, GoogleFont } from \"react-typography\"\nimport Typography from \"typography\"\nimport theme from \"typography-theme-sutro\"\n\nimport Styles from \"./Styles\"\n\nconst typography = new Typography({\n  ...theme,\n  baseFontSize: Styles.vars.fontSize.regular,\n  baseLineHeight: Styles.vars.lineHeights.regular,\n  blockMarginBottom: 0.5,\n  scaleRatio: 1.5\n})\n\nconst styles = Styles.Create({\n  container: {\n    backgroundColor: Styles.vars.colors.grey1,\n    maxWidth: Styles.vars.pageWidth,\n    margin: \"0 auto\",\n    padding: Styles.vars.spacing.large\n  }\n})\n\nconst Page = ({ children }) => {\n  return (\n    <React.Fragment>\n      <TypographyStyle typography={typography} />\n      <GoogleFont typography={typography} />\n      <div style={styles.container}>{children}</div>\n    </React.Fragment>\n  )\n}\n\nexport default Page\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport Styles from \"./Styles\"\n\nconst containerBaseStyle = {\n  display: \"flex\"\n}\n\nconst columnBaseStyle = {\n  textAlign: \"left\",\n  padding: `0 ${Styles.vars.spacing.regular.raw / 2}px`\n}\n\nconst equalStyle = {\n  flex: 1\n}\n\nconst firstStyle = {\n  textAlign: \"left\",\n  paddingLeft: 0\n}\n\nconst lastStyle = {\n  textAlign: \"right\",\n  paddingRight: 0\n}\n\nconst singleStyle = {\n  paddingLeft: 0,\n  paddingRight: 0,\n  textAlign: \"center\"\n}\n\nexport const Column = ({\n  children,\n  first,\n  last,\n  equalWidth,\n  centered,\n  style\n}) => {\n  const colStyle = Styles.Create({\n    ...columnBaseStyle,\n    ...(first ? firstStyle : {}),\n    ...(last ? lastStyle : {}),\n    ...((first && last) || centered ? singleStyle : {}),\n    ...(first && last ? singleStyle : {}),\n    ...(equalWidth ? equalStyle : {}),\n    ...(style || {})\n  })\n\n  return <div style={colStyle}>{children}</div>\n}\n\nColumn.propTypes = {\n  first: PropTypes.bool,\n  last: PropTypes.bool,\n  centered: PropTypes.bool,\n  equalWidth: PropTypes.bool,\n  style: PropTypes.object,\n  children: PropTypes.node\n}\n\nColumn.defaultProps = {\n  centered: false,\n  equalWidth: true\n}\n\nexport const Columns = ({ children, alignColumns }) => {\n  const columns = React.Children.toArray(children).filter(child => child)\n  const childCount = columns.length\n  const style = Styles.Create({\n    ...containerBaseStyle,\n    alignItems: alignColumns\n  })\n\n  return (\n    <div style={style}>\n      {columns.map((column, index) =>\n        React.cloneElement(column, {\n          first: index === 0,\n          last: index === childCount - 1\n        })\n      )}\n    </div>\n  )\n}\n\nColumns.propTypes = {\n  alignColumns: PropTypes.string,\n  children: PropTypes.node.isRequired\n}\n","import React from \"react\"\n\nimport Styles from \"./Styles\"\n\nconst styles = Styles.Create({\n  button: {\n    border: \"none\",\n    textAlign: \"center\",\n    backgroundColor: Styles.vars.colors.grey0,\n    cursor: \"pointer\",\n    padding: `${Styles.vars.spacing.xs} ${Styles.vars.spacing.small}`,\n    color: Styles.vars.colors.black\n  },\n  menuContainer: {\n    marginTop: Styles.vars.spacing.small,\n    textAlign: \"right\"\n  }\n})\n\nconst Button = props => {\n  const { style, children } = props\n\n  const actualStyle = {\n    ...styles.button,\n    ...style\n  }\n\n  return (\n    <button {...props} style={actualStyle}>\n      {children}\n    </button>\n  )\n}\n\nexport default Button\n\nconst ButtonMenu = props => {\n  const { style, children } = props\n  const buttons = React.Children.toArray(children).filter(child => child)\n\n  const actualStyle = {\n    ...styles.menuContainer,\n    ...style\n  }\n\n  return (\n    <div {...props} style={actualStyle}>\n      {buttons.map((button, index) =>\n        React.cloneElement(button, {\n          style: { marginLeft: Styles.vars.spacing.regular }\n        })\n      )}\n    </div>\n  )\n}\n\nexport { ButtonMenu }\n","import React, { Component } from \"react\"\n\nimport { Columns, Column } from \"./Columns\"\nimport Button, { ButtonMenu } from \"./Button\"\n\nimport Styles from \"./Styles\"\nimport logo from \"./logo.svg\"\n\nconst styles = Styles.Create({\n  img: {\n    height: \"80px\",\n    width: \"auto\"\n  }\n})\n\nclass Nav extends Component {\n  render() {\n    const { items } = this.props\n    return (\n      <div style={styles.root}>\n        <Columns>\n          <Column>\n            <img style={styles.img} src={logo} alt=\"logo\" />\n          </Column>\n          <Column style={{ flex: 3 }}>\n            <ButtonMenu>\n              {items.map((itemProps, i) => {\n                return <Button key={i} {...itemProps} />\n              })}\n            </ButtonMenu>\n          </Column>\n        </Columns>\n      </div>\n    )\n  }\n}\n\nNav.defaultProps = {\n  items: []\n}\n\nexport default Nav\n","import React from \"react\"\nimport TextareaAutosize from \"react-autosize-textarea\"\n\nimport Styles from \"./Styles\"\n\nconst styles = Styles.Create({\n  root: {\n    width: `100%`,\n    font: `${Styles.vars.spacing.regular} monospace`,\n    color: Styles.vars.colors.black\n  },\n  disabled: {\n    backgroundColor: Styles.vars.colors.orange\n  }\n})\n\nconst Textarea = props => {\n  const { style, children, disabled } = props\n\n  const actualStyle = {\n    ...styles.root,\n    ...style,\n    ...(disabled ? styles.disabled : {})\n  }\n\n  return (\n    <TextareaAutosize {...props} style={actualStyle}>\n      {children}\n    </TextareaAutosize>\n  )\n}\n\nTextarea.defaultProps = {\n  disabled: false\n}\n\nexport default Textarea\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\"\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\"\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\")\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\")\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      )\n    })\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","function getURLAsBuffer(url, onProgress = function() {}) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.open(\"GET\", url, true)\n    xhr.responseType = \"arraybuffer\"\n    xhr.addEventListener(\n      \"load\",\n      () => {\n        if (xhr.status === 200) {\n          resolve(xhr.response)\n        } else {\n          reject()\n        }\n      },\n      false\n    )\n    xhr.addEventListener(\"progress\", onProgress)\n    xhr.send()\n  })\n}\n\nexport { getURLAsBuffer }\n\nfunction timeout(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n\nexport { timeout }\n\nexport const SHOW_SCREEN = false\n\nfunction chooseRandom(array) {\n  return array[Math.floor(Math.random() * array.length)]\n}\n\nexport { chooseRandom }\n\nfunction getUserName() {\n  const randomName = chooseRandom([\n    \"Moon unit\",\n    \"Ravioli\",\n    \"Anthoni\",\n    \"Mookie\",\n    \"Diesel\",\n    \"Ulysses\",\n    \"Jose\",\n    \"‎Lasernut\",\n    \"‎Martha\",\n    \"‎Big boy\",\n    \"‎Baby girl\",\n    \"‎McNugget\",\n    \"Frederico\",\n    \"Sloan\",\n    \"Miller\",\n    \"Gordon\",\n    \"Lafayette\",\n    \"Jethro\",\n    \"Naomi\",\n    \"‎Towelette\",\n    \"Demitri\",\n    \"‎Lopez\",\n    \"‎Sullivan\",\n    \"‎Satchmo\",\n    \"Armando\",\n    \"Tiberius\",\n    \"Phoebe\",\n    \"Titan\",\n    \"Janus\",\n    \"Callisto\",\n    \"Puck\",\n    \"Belinda\",\n    \"Bianca\",\n    \"Dugan\",\n    \"Kiplet\",\n    \"Gomez\",\n    \"Kermit\",\n    \"Cedric\",\n    \"Solomon\",\n    \"‎Eustace\",\n    \"‎Zero\",\n    \"Flash\",\n    \"Tonto\",\n    \"Lazarus\",\n    \"Forbes\",\n    \"Skippy\",\n    \"Ripto\",\n    \"Sierra\",\n    \"Gilligan\",\n    \"Seymour\",\n    \"Mordechai\",\n    \"Vincent\",\n    \"Stacia\",\n    \"Poot\",\n    \"Janet\",\n    \"Penelope\"\n  ])\n\n  const name = window.localStorage.name\n    ? window.localStorage.name\n    : window.prompt(\"whats ur name?\", randomName)\n  window.localStorage.name = name\n  return name\n}\n\nexport { getUserName }\n\n// https://steamcommunity.com/sharedfiles/filedetails/?id=128648903\nfunction getUserVoice(noPrompt = false) {\n  const randomVoice = chooseRandom([\n    \"[:nb]\",\n    \"[:nh]\",\n    \"[:nk]\",\n    \"[:nf]\",\n    \"[:nd]\",\n    \"[:dv ap 10]\",\n    \"[:dv ap 200]\",\n    \"[:dv hs 1]\",\n    \"[:dv pr 1]\",\n    \"[:dv gv 100]\",\n    \"[:nb][:dv pr 1][:dv br 200][:dv gv 40][:dv hs 50][:rate 30]\"\n  ])\n\n  const voice = window.localStorage.voice\n    ? window.localStorage.voice\n    : noPrompt\n      ? randomVoice\n      : window.prompt(\"whats ur voice?\", randomVoice)\n  window.localStorage.voice = voice\n  return voice\n}\n\nexport { getUserVoice }\n\nfunction getWelcomeMessage(noPrompt = false) {\n  return chooseRandom([\n    \"How are you gentlemen?\",\n    \"harder daddy\",\n    \"happy birthday\",\n    \"Sure why not\",\n    \"Listen\",\n    \"Lets circle back on that\",\n    \"Who cares\",\n    \"Are you f’realz\",\n    \"Welcome to my world\",\n    \"I have thoughts on that\",\n    \"Uh\",\n    \"Last time for everything\",\n    \"Need you to get real aware\",\n    \"there's no there there\",\n    \"Show me the data\",\n    \"bulbous\",\n    \"Who fuks\"\n  ])\n}\n\nexport { getWelcomeMessage }\n","import seabios from \"./bios/seabios.bin\"\nimport vgabios from \"./bios/vgabios.bin\"\n\nimport staticFiles from \"./staticFiles\"\n\nimport { getURLAsBuffer, SHOW_SCREEN } from \"./utils\"\n\nconst MB = 1024 * 1024\n\nconst win98Filename = \"windows98.img\"\nconst v86StateFilename = \"v86state.bin\"\n\nlet win98URL = staticFiles[win98Filename]\nlet v86StateURL = staticFiles[v86StateFilename]\nconst LOCAL_ASSETS = process.env.REACT_APP_USE_LOCAL_ASSETS === \"true\"\nif (LOCAL_ASSETS) {\n  win98URL = `${\n    process.env.REACT_APP_CHATSERVER_ENDPOINT\n  }/static/${win98Filename}`\n  v86StateURL = `${\n    process.env.REACT_APP_CHATSERVER_ENDPOINT\n  }/static/${v86StateFilename}`\n}\n\n// [:phoneme on][hxae<300,10>piy<300,10> brr<600,12>th<100>dey<600,10> tuw<600,15> yu<1200,14>_<120>][hxae<300,10>piy<300,10> brr<600,12>th<100>dey<600,10> tuw<600,17> yu<1200,15>_<120>][hxae<300,10>piy<300,10>brr<600,22>th<100>dey<600,19>dih<600,15>rdeh<600,14>ktao<600,12>k_<120>_<120>][hxae<300,20>piy<300,20> brr<600,19>th<100>dey<600,15> tuw<600,17> yu<1200,15>]\n\nfunction createEmulator(opts) {\n  const onSerialOutput = opts.onSerialOutput\n  const onXHRProgress = opts.onXHRProgress\n\n  return new Promise((resolve, reject) => {\n    let promises = [getURLAsBuffer(v86StateURL, onXHRProgress)]\n\n    if (LOCAL_ASSETS) {\n      promises.push(getURLAsBuffer(win98URL))\n    }\n\n    Promise.all(promises).then(values => {\n      const v86State = values[0]\n      const win98 = values[1]\n\n      const hda = LOCAL_ASSETS\n        ? { buffer: win98 }\n        : { url: win98URL, async: true, size: 300 * MB }\n      const emulator = new window.V86Starter({\n        screen_container: SHOW_SCREEN\n          ? document.getElementById(\"screen_container\")\n          : null,\n        bios: { url: seabios },\n        vga_bios: { url: vgabios },\n        hda,\n        autostart: true,\n        memory_size: 128 * MB,\n        vga_memory_size: 8 * MB,\n        disable_mouse: true,\n        disable_keyboard: true\n      })\n\n      window.emulator = emulator\n\n      emulator.add_listener(\"emulator-ready\", async () => {\n        emulator.restore_state(v86State)\n        resolve(emulator)\n      })\n\n      emulator.add_listener(\"serial0-output-char\", char => {\n        onSerialOutput(char)\n      })\n    })\n  })\n}\n\nexport default createEmulator\n","import React, { Component } from \"react\"\n\nimport io from \"socket.io-client\"\n\nimport Page from \"./Page\"\nimport Nav from \"./Nav\"\nimport Textarea from \"./Textarea\"\n\nimport * as serviceWorker from \"./serviceWorker\"\n\nimport {\n  timeout,\n  SHOW_SCREEN,\n  getUserName,\n  getUserVoice,\n  getWelcomeMessage\n} from \"./utils\"\n\nimport createEmulator from \"./emulator\"\nimport Styles from \"./Styles\"\n\nconst socket = io(process.env.REACT_APP_CHATSERVER_ENDPOINT, {\n  transports: [\"polling\"]\n})\n\nconst WELCOME_MESSAGE = getWelcomeMessage()\n\nconst styles = Styles.Create({\n  screen: {\n    whiteSpace: \"pre\",\n    font: `${Styles.vars.spacing.medium} monospace`,\n    lineHeight: Styles.vars.spacing.medium\n  },\n  chatHistory: {\n    // backgroundColor: Styles.vars.colors.white\n  },\n  chatHistoryItem: {\n    marginTop: Styles.vars.spacing.medium\n  }\n})\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      whatToSay: WELCOME_MESSAGE,\n      busy: true,\n      busyText: \"Please wait...\",\n      serialOutput: \"\",\n      name: getUserName(),\n      voice: getUserVoice(true),\n      chatHistory: []\n    }\n\n    this.broadcast = this.broadcast.bind(this)\n    this.utterance = this.utterance.bind(this)\n\n    this.onResetName = this.onResetName.bind(this)\n    this.onResetVoice = this.onResetVoice.bind(this)\n\n    this.onChangeWhatToSay = this.onChangeWhatToSay.bind(this)\n    this.onMaybeSubmitWhatToSay = this.onMaybeSubmitWhatToSay.bind(this)\n    this.onUpdateChatHistory = this.onUpdateChatHistory.bind(this)\n  }\n\n  onUpdateChatHistory(name, whatToSay) {\n    let { chatHistory } = this.state\n    chatHistory = [{ name, whatToSay }].concat(chatHistory)\n\n    this.setState({\n      chatHistory\n    })\n  }\n\n  broadcast() {\n    const { voice, name, whatToSay } = this.state\n\n    this.utterance(voice, whatToSay, true)\n    this.onUpdateChatHistory(name, whatToSay)\n    socket.emit(\n      \"chat message\",\n      JSON.stringify({\n        name,\n        whatToSay,\n        voice\n      })\n    )\n  }\n\n  async utterance(voice, whatToSay, self) {\n    if (!this.state.busy) {\n      this.setState({\n        busy: true,\n        busyText: \"Please wait, processing speech\"\n      })\n\n      if (self) {\n        this.setState({\n          serialOutput: \"\",\n          whatToSay: \"say something...\"\n        })\n      }\n\n      const sayText = `[:phoneme on]${voice}${whatToSay}213p`\n\n      this.emulator.serial0_send(sayText)\n\n      while (true) {\n        await timeout(1000)\n        const { serialOutput } = this.state\n        if (serialOutput.indexOf(\"ready\") !== -1) {\n          this.setState({\n            busy: false,\n            busyText: \"Ready\"\n          })\n          return\n        }\n      }\n    }\n  }\n\n  async componentDidMount() {\n    this.emulator = await createEmulator({\n      onSerialOutput: char => {\n        let { serialOutput } = this.state\n        serialOutput += char\n        this.setState({ serialOutput })\n      },\n      onXHRProgress: e => {\n        if (e.lengthComputable) {\n          const percentComplete = e.loaded / e.total * 100\n          this.setState({\n            busyText: `Please wait... ${parseInt(percentComplete, 10)}% loaded (make sure ur sound is on)`\n          })\n        }\n      }\n    })\n\n    // register service worker after emulator loads\n    serviceWorker.register()\n\n    await timeout(1000)\n    this.setState({\n      busy: false\n    })\n    await this.broadcast(WELCOME_MESSAGE, true)\n\n    socket.on(\"chat message\", msg => {\n      const { name, whatToSay, voice } = JSON.parse(msg)\n      this.onUpdateChatHistory(name, whatToSay)\n      this.utterance(voice, whatToSay, false)\n    })\n  }\n\n  onResetName() {\n    delete window.localStorage.name\n    this.setState({\n      name: getUserName()\n    })\n  }\n\n  onResetVoice() {\n    delete window.localStorage.voice\n    this.setState({\n      voice: getUserVoice()\n    })\n  }\n\n  onChangeWhatToSay(e) {\n    this.setState({\n      whatToSay: e.target.value\n    })\n  }\n\n  onMaybeSubmitWhatToSay(e) {\n    if (e.key === \"Enter\") {\n      this.broadcast(this.state.whatToSay)\n    }\n  }\n\n  render() {\n    const { busy, busyText, whatToSay, name, voice, chatHistory } = this.state\n\n    return (\n      <Page>\n        <Nav\n          items={[\n            { children: `name: ${name}`, onClick: this.onResetName },\n            { children: `voice: ${voice}`, onClick: this.onResetVoice }\n          ]}\n        />\n\n        {!busy && (\n          <Textarea\n            value={whatToSay}\n            disabled={busy}\n            onChange={this.onChangeWhatToSay}\n            onKeyPress={this.onMaybeSubmitWhatToSay}\n          />\n        )}\n\n        <pre>{busyText}</pre>\n\n        <div style={styles.chatHistory}>\n          {chatHistory.map(({ name, whatToSay }) => {\n            const msg = `${name}: ${whatToSay}`\n            return (\n              <Textarea\n                style={styles.chatHistoryItem}\n                key={msg}\n                value={msg}\n                disabled={true}\n              />\n            )\n          })}\n        </div>\n\n        {SHOW_SCREEN && (\n          <div>\n            <div id=\"screen_container\">\n              <div style={styles.screen} />\n              <canvas style={{ display: \"none\" }} />\n            </div>\n          </div>\n        )}\n      </Page>\n    )\n  }\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}