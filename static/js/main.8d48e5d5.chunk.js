(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t){e.exports={"v86state.bin":"https://storage.googleapis.com/hypertalk-static/v86state.bin","windows98.img":"https://storage.googleapis.com/hypertalk-static/windows98.img"}},34:function(e,t,n){e.exports=n.p+"static/media/logo.186ee9ec.svg"},36:function(e,t,n){e.exports=n.p+"static/media/seabios.b72845a6.bin"},37:function(e,t,n){e.exports=n.p+"static/media/vgabios.1747aff3.bin"},41:function(e,t,n){e.exports=n(76)},48:function(e,t,n){},73:function(e,t){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(30),s=n.n(r),i=n(38),c=n(3),u=n.n(c),l=n(10),p=n(31),h=n(32),d=n(39),f=n(33),m=n(40),w=n(2),g=n(34),v=n.n(g),y=(n(48),n(35)),b=n.n(y),k=n(36),x=n.n(k),O=n(37),j=n.n(O),E=n(16),S=n.n(E),_=S.a["windows98.img"],T=S.a["v86state.bin"],P=(b()("https://hypertalk-221623.appspot.com"),"welcome to [_<1,30>]hypurtalk! [:nk]i need help oh god please");function C(e){return new Promise(function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.addEventListener("load",function(){200===a.status?t(a.response):n()},!1),a.send()})}var A={screen:{whiteSpace:"pre",font:"".concat(14,"px monospace"),lineHeight:"".concat(14,"px")},input:{marginTop:"10px",textAlign:"center",whiteSpace:"pre",font:"".concat(14,"px monospace"),lineHeight:"".concat(14,"px")}};function N(e){return new Promise(function(t){return setTimeout(t,e)})}var W=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).state={whatToSay:P,busy:!0,serialOutput:""},n.say=n.say.bind(Object(w.a)(Object(w.a)(n))),window.say=n.say,n.onChange=n.onChange.bind(Object(w.a)(Object(w.a)(n))),n.onKeyPress=n.onKeyPress.bind(Object(w.a)(Object(w.a)(n))),n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"say",value:function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.busy){e.next=14;break}this.setState({busy:!0,serialOutput:""}),n="[:phoneme on]".concat(t,"213p"),console.log(n),this.emulator.serial0_send(n);case 5:return e.next=8,N(2e3);case 8:if(-1===this.state.serialOutput.indexOf("ready")){e.next=12;break}return this.setState({busy:!1}),e.abrupt("return");case 12:e.next=5;break;case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark(function e(){var t,n=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=1048576,Promise.all([C(T)]).then(function(e){var a=Object(i.a)(e,1)[0];n.emulator=new window.V86Starter({screen_container:null,bios:{url:x.a},vga_bios:{url:j.a},hda:{url:_,async:!0,size:300*t},autostart:!0,memory_size:128*t,vga_memory_size:8*t,disable_mouse:!0,disable_keyboard:!0}),window.emulator=n.emulator,n.emulator.add_listener("emulator-ready",Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.emulator.restore_state(a),e.next=3,N(1e3);case 3:return n.setState({busy:!1}),e.next=6,n.say(P,!0);case 6:case"end":return e.stop()}},e,this)}))),n.emulator.add_listener("serial0-output-char",function(e){var t=n.state.serialOutput;t+=e,n.setState({serialOutput:t})})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({whatToSay:e.target.value})}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.say(this.state.whatToSay)}},{key:"render",value:function(){var e=this.state,t=e.busy,n=e.whatToSay;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",{className:"App-title"},"Welcome to hypertalk")),o.a.createElement("textarea",{value:n,style:A.input,disabled:t,onChange:this.onChange,onKeyPress:this.onKeyPress,cols:80,rows:10}),o.a.createElement("pre",null,t?"Please wait...":"Ready"),!1)}}]),t}(a.Component),K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(o.a.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");K?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):L(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):L(e)})}}()}},[[41,2,1]]]);
//# sourceMappingURL=main.8d48e5d5.chunk.js.map